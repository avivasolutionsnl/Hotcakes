{
    "Parameters": {
      "SiteName": {
        "Type": "string",
        "DefaultValue": "Sitecore",
        "Description": "The name of the site to be deployed."
      },
      "SitecoreAdminPassword": {
          "Type": "string",
          "DefaultValue": "b",
          "Description": "The admin password for the Sitecore instance."
      },
      "StorefrontPackageFullPath": {
        "Type": "string",
        "Description": "The path to the SXA storefront zip.",
        "DefaultValue": "/files-mount/storefront-package.zip"
      },
      "StorefrontThemesPackageFullPath": {
        "Type": "string",
        "Description": "The path to the SXA storefront themes zip.",
        "DefaultValue": "/files-mount/storefront-themes-package.zip"
      },
      "HabitatImagesPackageFullPath": {
        "Type": "string",
        "Description": "The path to the Habitat images zip.",
        "DefaultValue": "/files-mount/habitat-images-package.zip"
      },      
      "PackagesDirDst": {
        "Type": "string",
        "Description": "The path to packages directory.",
        "DefaultValue": "C:\\inetpub\\wwwroot\\sitecore\\App_Data\\packages\\"
      },
      "BaseUrl": {
        "Type": "string",
        "Description": "The utility pages base url.",
        "DefaultValue": "http://sitecore/SiteUtilityPages"
      }
    },
    "Modules": [ "SitecoreUtilityTasks" ],
    "Tasks": {
      "CheckPaths": {
        "Type": "EnsurePath",
        "Params": {
          "Exists": [
            "[parameter('StorefrontPackageFullPath')]",
             "[parameter('StorefrontThemesPackageFullPath')]",
             "[parameter('HabitatImagesPackageFullPath')]"
          ]
        }
      },
      "InstallStorefrontPackage": {
        "Type": "InstallModule",
        "Params": {
          "ModuleFullPath": "[parameter('StorefrontPackageFullPath')]",
          "ModulesDirDst": "[parameter('PackagesDirDst')]",
          "BaseUrl": "[parameter('BaseUrl')]"
        }
      },
      "InstallStorefrontThemesPackage": {
        "Type": "InstallModule",
        "Params": {
          "ModuleFullPath": "[parameter('StorefrontThemesPackageFullPath')]",
          "ModulesDirDst": "[parameter('PackagesDirDst')]",
          "BaseUrl": "[parameter('BaseUrl')]"
        }
      },
      "InstallHabitatImagesPackage": {
        "Type": "InstallModule",
        "Params": {
          "ModuleFullPath": "[parameter('HabitatImagesPackageFullPath')]",
          "ModulesDirDst": "[parameter('PackagesDirDst')]",
          "BaseUrl": "[parameter('BaseUrl')]"
        }
      },
      "UpdateSolrSchema": {
        // Update the solr schemas.
        "Type": "SitecoreUrl",
        "Params": {
            "SitecoreInstanceRoot": "[concat('http://', parameter('SiteName'))]",
            "SitecoreActionPath": "sitecore/admin/PopulateManagedSchema.aspx?indexes=all",
            "UserName": "admin",
            "Password": "[parameter('SitecoreAdminPassword')]"
        }
      }   
    }
  }
    